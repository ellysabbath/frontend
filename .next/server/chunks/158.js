exports.id=158,exports.ids=[158],exports.modules={1785:(e,t,r)=>{Promise.resolve().then(r.bind(r,22921))},13216:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,86346,23)),Promise.resolve().then(r.t.bind(r,27924,23)),Promise.resolve().then(r.t.bind(r,35656,23)),Promise.resolve().then(r.t.bind(r,40099,23)),Promise.resolve().then(r.t.bind(r,38243,23)),Promise.resolve().then(r.t.bind(r,28827,23)),Promise.resolve().then(r.t.bind(r,62763,23)),Promise.resolve().then(r.t.bind(r,97173,23))},16376:()=>{},22921:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(60687),a=r(43210),n=r(26999),o=r(67142),i=r(16189),l=r(85814),d=r.n(l);function c({children:e}){let[t,r]=(0,a.useState)(!1),l=(0,a.useRef)(null),c=(0,i.usePathname)(),{user:h}=(0,n.A)(),u=async()=>{try{await o.u.logout(),window.location.reload()}catch(e){console.error("Logout error: ",e)}},m=h?.role==="admin"||h?.role==="editor"?[{name:"Home",href:"/dashboard",icon:"\uD83D\uDCCA"},{name:"Departments",href:"/dashboard/departments",icon:"\uD83D\uDCC8"},{name:"Messages & SMS",href:"/dashboard/messages",icon:"✉️"},{name:"Announcements",href:"/dashboard/announcements",icon:"\uD83D\uDCE3"},{name:"Timetable & Calendar",href:"/dashboard/timetable",icon:"\uD83D\uDCC5"},{name:"Users",href:"/dashboard/users",icon:"\uD83D\uDC65"},{name:"Gallery",href:"/dashboard/galary",icon:"\uD83D\uDDBC️"},{name:"Writings",href:"/dashboard/writings",icon:"\uD83D\uDCDA"},{name:"About us",href:"/dashboard/about-us",icon:"ℹ️"},{name:"Settings",href:"/dashboard/settings",icon:"⚙️"},{name:"Profile",href:"/dashboard/profile",icon:"\uD83D\uDC64"},{name:"GoLive",href:"/dashboard/golive",icon:"\uD83C\uDFA5"},{name:"Admin",href:"/dashboard/admin",icon:"\uD83D\uDEE0️"}]:h?.role==="user"?[{name:"Home",href:"/dashboard",icon:"\uD83D\uDCCA"},{name:"DepartmentsUser",href:"/dashboard/departments-user",icon:"\uD83D\uDCC8"},{name:"AnnouncementsUser",href:"/dashboard/announcements-user",icon:"\uD83D\uDCE3"},{name:"TimetableUser & Calendar",href:"/dashboard/timetable-user",icon:"\uD83D\uDCC5"},{name:"Profile",href:"/dashboard/profile",icon:"\uD83D\uDC64"},{name:"About us",href:"/dashboard/about-us",icon:"ℹ️"}]:[];return(0,s.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[t&&(0,s.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-50 z-20 lg:hidden",onClick:()=>r(!1)}),(0,s.jsxs)("div",{ref:l,className:`fixed inset-y-0 left-0 z-30 w-64 bg-white shadow-md transform transition-transform duration-300 ease-in-out
          lg:static lg:translate-x-0 lg:z-auto flex flex-col
          ${t?"translate-x-0":"-translate-x-full"}`,children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b flex-shrink-0",children:[(0,s.jsx)("h4",{className:"text-xl font-semibold text-gray-800",children:"BAHI SDA MANAGEMENT SYSTEM"}),(0,s.jsx)("button",{onClick:()=>r(!1),className:"lg:hidden text-gray-500 hover:text-gray-700 p-1 rounded-full hover:bg-gray-100","aria-label":"Close sidebar",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsx)("nav",{className:"flex-1 overflow-y-auto",children:(0,s.jsx)("ul",{className:"space-y-2 px-4 py-4",children:m.map(e=>"GoLive"===e.name?(0,s.jsx)("li",{children:(0,s.jsxs)("button",{onClick:()=>window.open("https://videoconf.pythonanywhere.com","_blank"),className:"flex items-center p-3 rounded-lg transition-colors duration-200 text-gray-700 hover:bg-blue-50 hover:text-blue-600 w-full",children:[(0,s.jsx)("span",{className:"mr-3 text-lg",children:e.icon}),(0,s.jsx)("span",{className:"font-medium",children:e.name})]})},e.name):"Admin"===e.name?(0,s.jsx)("li",{children:(0,s.jsxs)("button",{onClick:()=>window.open("https://bahifinal.pythonanywhere.com/admin/","_blank"),className:"flex items-center p-3 rounded-lg transition-colors duration-200 text-gray-700 hover:bg-blue-50 hover:text-blue-600 w-full",children:[(0,s.jsx)("span",{className:"mr-3 text-lg",children:e.icon}),(0,s.jsx)("span",{className:"font-medium",children:e.name})]})},e.name):(0,s.jsx)("li",{children:(0,s.jsxs)(d(),{href:e.href,className:`flex items-center p-3 rounded-lg transition-colors duration-200 ${c===e.href?"bg-blue-50 text-blue-600":"text-gray-700 hover:bg-blue-50 hover:text-blue-600"}`,onClick:()=>r(!1),children:[(0,s.jsx)("span",{className:"mr-3 text-lg",children:e.icon}),(0,s.jsx)("span",{className:"font-medium",children:e.name})]})},e.name))})}),(0,s.jsx)("div",{className:"flex-shrink-0 p-4 border-t",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center mr-3",children:(0,s.jsx)("span",{className:"text-blue-600 font-semibold",children:h?.username?.charAt(0).toUpperCase()||"U"})}),(0,s.jsx)("div",{children:(0,s.jsx)("p",{className:"text-xs text-gray-500",children:h?.role||""})})]})})]}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,s.jsx)("header",{className:"bg-white shadow-sm z-10",children:(0,s.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("button",{onClick:()=>r(!t),className:"text-gray-500 hover:text-gray-700 mr-4 p-2 rounded-md hover:bg-gray-100 transition-colors","aria-label":"Toggle sidebar",children:t?(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Dashboard"})]}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["welcome"," ",(0,s.jsx)("i",{className:"text-1xl text-green-600",children:h?.role||""})," logged in as"," "]}),(0,s.jsx)("button",{className:"py-2 px-4 cursor-pointer font-semibold rounded-lg bg-gray-100 hover:bg-gray-200 transition-colors duration-200",onClick:u,children:(0,s.jsx)("span",{className:"text-blue-500 hover:text-blue-700",children:"Logout"})})]})}),(0,s.jsx)("main",{className:"flex-1 overflow-y-auto bg-gray-50",children:e})]})]})}},23384:(e,t,r)=>{Promise.resolve().then(r.bind(r,96612))},26368:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,16444,23)),Promise.resolve().then(r.t.bind(r,16042,23)),Promise.resolve().then(r.t.bind(r,88170,23)),Promise.resolve().then(r.t.bind(r,49477,23)),Promise.resolve().then(r.t.bind(r,29345,23)),Promise.resolve().then(r.t.bind(r,12089,23)),Promise.resolve().then(r.t.bind(r,46577,23)),Promise.resolve().then(r.t.bind(r,31307,23))},26999:(e,t,r)=>{"use strict";r.d(t,{A:()=>d,O:()=>l});var s=r(60687),a=r(43210),n=r(59556),o=r(15659);let i=(0,a.createContext)(void 0);function l({children:e}){let[t,r]=(0,a.useState)(null),[l,d]=(0,a.useState)(!0),c=async(e,t)=>{try{let{access:s,refresh:a,user:i}=(await n.A.post("/auth/login/",{email:e,password:t})).data;o.A.set("access_token",s,{expires:1}),o.A.set("refresh_token",a,{expires:7}),r(i)}catch(e){throw Error(e.response?.data?.detail||"Login failed")}},h=async e=>{try{await n.A.post("/auth/register/",e)}catch(e){throw Error(e.response?.data?.email?.[0]||e.response?.data?.username?.[0]||"Registration failed")}},u=async e=>{try{let t=await n.A.patch("/auth/profile/update/",e);r(t.data)}catch(e){throw Error(e.response?.data?.detail||"Profile update failed")}},m=async()=>{try{let e=await n.A.get("/current-user/");r(e.data)}catch(e){throw e}};return(0,s.jsx)(i.Provider,{value:{user:t,loading:l,login:c,register:h,logout:()=>{let e=o.A.get("refresh_token");e&&n.A.post("/auth/logout/",{refresh_token:e}).catch(()=>{}),o.A.remove("access_token"),o.A.remove("refresh_token"),r(null)},updateProfile:u,refreshUserData:m},children:e})}function d(){let e=(0,a.useContext)(i);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},38749:(e,t,r)=>{"use strict";r.d(t,{X:()=>s,a:()=>a});let s="access_token",a="refresh_token"},41880:(e,t,r)=>{Promise.resolve().then(r.bind(r,90606))},46055:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(31658);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},54647:()=>{},58014:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d,metadata:()=>l});var s=r(37413),a=r(56389),n=r.n(a),o=r(51189),i=r.n(o);r(82704);let l={title:"BAHI CHURCH MANAGEMENT SYSTEM",description:"created by tesla digest"};function d({children:e}){return(0,s.jsx)("html",{lang:"en",children:(0,s.jsxs)("body",{className:`${n().variable} ${i().variable} antialiased`,children:[e,(0,s.jsx)("script",{dangerouslySetInnerHTML:{__html:"window.next={badge:false}"}})]})})}},59556:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var s=r(38749),a=r(51060),n=r(15659);let o="https://bahifinal.pythonanywhere.com/api/auth",i=a.A.create({baseURL:o,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{let t=n.A.get(s.X);return t&&e.headers&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),i.interceptors.response.use(e=>e,async e=>{let t=e.config;if(e.response?.status===401&&!t._retry){t._retry=!0;let e=n.A.get(s.a);if(e)try{let{data:r}=await a.A.post(`${o}/token/refresh/`,{refresh:e}),l=r.access;return n.A.set(s.X,l,{sameSite:"Strict"}),t.headers.Authorization=`Bearer ${l}`,i(t)}catch(e){n.A.remove(s.X),n.A.remove(s.a),window.location.href="/login"}}return Promise.reject(e)});let l=i},61331:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/mnt/c/users/elly/desktop/sadaka/frontend/app/(protected)/dashboard/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/mnt/c/users/elly/desktop/sadaka/frontend/app/(protected)/dashboard/layout.tsx","default")},67142:(e,t,r)=>{"use strict";r.d(t,{u:()=>o});var s=r(38749),a=r(15659),n=r(59556);let o={register:async e=>{try{return(await n.A.post("/register/",e)).data}catch(e){console.log("Error in AuthService.register:",e)}},login:async(e,t)=>{try{let r=await n.A.post("/login/",{email:e,password:t});if(200===r.status){let{access:e,refresh:t}=r.data,n={expires:1,secure:!0};return a.A.set(s.X,e,n),a.A.set(s.a,t,{...n,expires:7}),r.data}}catch(e){console.log("Error in AuthService.login: ",e)}},verifyEmail:async e=>{try{let t=await n.A.get(`/verify-email/${e}/`);if(200===t.status){let{access:e,refresh:r}=t.data,n={expires:1,secure:!0};return a.A.set(s.X,e,n),a.A.set(s.a,r,{...n,expires:7}),t.data}}catch(e){return console.log("Error in AuthService.sendVerificationEmail:",e),{error:e instanceof Error?e.message:"An error occurred while verifying email"}}},resendVerificationEmail:async e=>{try{let t=await n.A.post("/resend-verification-email/",{email:e});if(200===t.status)return t.data}catch(e){console.log("Error in AuthService.resendVerificationEmail:",e)}},getUserProfile:async()=>{try{return(await n.A.get("/profile/")).data}catch(e){console.log("Error in AuthService.getUserProfile:",e)}},logout:async()=>{try{let e=await n.A.post("/logout/",{refresh_token:a.A.get(s.a)});return a.A.remove(s.X),a.A.remove(s.a),e.data}catch(e){console.log("Error in AuthService.logout:",e),a.A.remove(s.X),a.A.remove(s.a)}}}},81528:()=>{},82704:()=>{},88633:(e,t,r)=>{Promise.resolve().then(r.bind(r,61331))},90606:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(60687),a=r(43210),n=r(15659),o=r(38749),i=r(67142),l=r(16189),d=r(26999);let c=({children:e})=>{let[t,r]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{(async()=>{if(!n.A.get(o.X))return(0,l.redirect)("/login");try{await i.u.getUserProfile()}catch(e){console.error("Failed to fetch user data:",e),i.u.logout(),(0,l.redirect)("/login")}r(!1)})()},[]),t)?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center font-bold bg-gray-100",children:"wait redirecting ......"}):(0,s.jsx)(d.O,{children:e})}},96612:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/mnt/c/users/elly/desktop/sadaka/frontend/app/(protected)/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/mnt/c/users/elly/desktop/sadaka/frontend/app/(protected)/layout.tsx","default")}};