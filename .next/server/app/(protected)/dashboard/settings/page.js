(()=>{var e={};e.id=157,e.ids=[157],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},15822:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var r=s(65239),a=s(48088),n=s(88170),i=s.n(n),l=s(30893),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d={children:["",{children:["(protected)",{children:["dashboard",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,59186)),"/mnt/c/users/elly/desktop/sadaka/frontend/app/(protected)/dashboard/settings/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,61331)),"/mnt/c/users/elly/desktop/sadaka/frontend/app/(protected)/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,96612)),"/mnt/c/users/elly/desktop/sadaka/frontend/app/(protected)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,58014)),"/mnt/c/users/elly/desktop/sadaka/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/mnt/c/users/elly/desktop/sadaka/frontend/app/(protected)/dashboard/settings/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(protected)/dashboard/settings/page",pathname:"/dashboard/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34448:(e,t,s)=>{Promise.resolve().then(s.bind(s,59186))},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},59186:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/mnt/c/users/elly/desktop/sadaka/frontend/app/(protected)/dashboard/settings/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/mnt/c/users/elly/desktop/sadaka/frontend/app/(protected)/dashboard/settings/page.tsx","default")},61512:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(60687),a=s(43210),n=s(26999),i=s(77567);function l(){let{user:e}=(0,n.A)(),[t,s]=(0,a.useState)({id:"",email:"",first_name:"",last_name:"",full_name:"",role:"",bio:"",profile_picture:"",is_newsletter_subscribed:!1,website_url:"",github_url:"",linkedin_url:"",profile_completion_percentage:0,is_profile_complete:!1}),[l,o]=(0,a.useState)(!0),[d,c]=(0,a.useState)(null),[u,m]=(0,a.useState)(!1),[p,x]=(0,a.useState)({notifications:!0,emailUpdates:!1,darkMode:!1,autoSave:!0,language:"english"}),h=e=>{i.A.fire({toast:!0,position:"top-end",icon:"success",title:e,showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",i.A.stopTimer),e.addEventListener("mouseleave",i.A.resumeTimer)}})},b=e=>{i.A.fire({toast:!0,position:"top-end",icon:"error",title:e,showConfirmButton:!1,timer:4e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",i.A.stopTimer),e.addEventListener("mouseleave",i.A.resumeTimer)}})},g=(e,t)=>{s(s=>({...s,[e]:t}))},f=(e,t)=>{x(s=>({...s,[e]:t}))},v=e=>{s(t=>({...t,[e]:!t[e]}))},y=async r=>{r.preventDefault(),c(null);try{if(!e?.id)throw Error("User ID not available");m(!0);let r=await fetch(`/api/profile/users/${e.id}/`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({first_name:t.first_name,last_name:t.last_name,bio:t.bio,website_url:t.website_url,github_url:t.github_url,linkedin_url:t.linkedin_url,is_newsletter_subscribed:t.is_newsletter_subscribed})});if(!r.ok){let e=await r.json().catch(()=>({}));throw Error(e.error||`Failed to update: ${r.status}`)}let a=await r.json();s(a),h("Settings updated successfully!")}catch(t){console.error("Error updating settings:",t);let e=t.message||"Failed to update settings. Please try again.";c(e),b(e)}finally{m(!1)}};return l?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading user data..."})]})}):d&&!t.email?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md max-w-md w-full",children:[(0,r.jsx)("div",{className:"text-red-600 mb-4 text-center",children:(0,r.jsx)("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsx)("div",{className:"text-red-800 text-center mb-6",children:d}),(0,r.jsx)("button",{className:"w-full bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700",onClick:()=>window.location.reload(),children:"Try Again"})]})}):(0,r.jsxs)("div",{className:"p-6 min-h-screen bg-gray-50",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Settings"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Manage your account preferences and settings"})]}),d&&(0,r.jsx)("div",{className:"mb-6 bg-red-50 p-4 rounded-md",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,r.jsx)("div",{className:"ml-3",children:(0,r.jsx)("h3",{className:"text-sm font-medium text-red-800",children:d})})]})}),(0,r.jsx)("form",{onSubmit:y,children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,r.jsx)("div",{className:"p-6 border-b",children:(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Account Settings"})}),(0,r.jsxs)("div",{className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-md font-medium text-gray-800 mb-4",children:"Profile Information"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),(0,r.jsx)("input",{type:"text",value:t.first_name,onChange:e=>g("first_name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"First Name"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),(0,r.jsx)("input",{type:"text",value:t.last_name,onChange:e=>g("last_name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Last Name"})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,r.jsx)("input",{type:"email",value:t.email,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-100",readOnly:!0,disabled:!0}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Email cannot be changed"})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bio"}),(0,r.jsx)("textarea",{rows:4,value:t.bio,onChange:e=>g("bio",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Tell us about yourself"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-md font-medium text-gray-800 mb-4",children:"Social Links"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website"}),(0,r.jsx)("input",{type:"url",value:t.website_url,onChange:e=>g("website_url",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GitHub"}),(0,r.jsx)("input",{type:"url",value:t.github_url,onChange:e=>g("github_url",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://whatsapp/chat/me"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"LinkedIn"}),(0,r.jsx)("input",{type:"url",value:t.linkedin_url,onChange:e=>g("linkedin_url",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://facebook.com/in/username"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-md font-medium text-gray-800 mb-4",children:"Newsletter"}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",id:"newsletter",checked:t.is_newsletter_subscribed,onChange:()=>v("is_newsletter_subscribed"),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,r.jsx)("label",{htmlFor:"newsletter",className:"ml-2 block text-sm text-gray-700",children:"Subscribe to newsletter"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-md font-medium text-gray-800 mb-4",children:"Preferences"}),(0,r.jsx)("div",{className:"space-y-4",children:[{label:"Enable Notifications",field:"notifications"},{label:"Email Updates",field:"emailUpdates"},{label:"Dark Mode",field:"darkMode"},{label:"Auto Save",field:"autoSave"}].map(e=>(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",id:e.field,checked:!!p[e.field],onChange:t=>f(e.field,t.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,r.jsx)("label",{htmlFor:e.field,className:"ml-2 block text-sm text-gray-700",children:e.label})]},e.field))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-md font-medium text-gray-800 mb-4",children:"Language & Region"}),(0,r.jsxs)("select",{value:p.language,onChange:e=>f("language",e.target.value),className:"w-full md:w-64 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"english",children:"English"}),(0,r.jsx)("option",{value:"spanish",children:"Spanish"}),(0,r.jsx)("option",{value:"french",children:"French"}),(0,r.jsx)("option",{value:"german",children:"German"})]})]}),(0,r.jsxs)("div",{className:"flex space-x-4 pt-4",children:[(0,r.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:u,children:u?(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):"Save Changes"}),(0,r.jsx)("button",{type:"button",onClick:()=>{window.location.reload()},className:"bg-gray-100 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-200",disabled:u,children:"Cancel"})]})]})]})})]})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},92592:(e,t,s)=>{Promise.resolve().then(s.bind(s,61512))},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[447,985,658,814,770,803,158],()=>s(15822));module.exports=r})();