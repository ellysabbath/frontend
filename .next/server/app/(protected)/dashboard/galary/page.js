(()=>{var e={};e.id=414,e.ids=[414],e.modules={50:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>l});var o=r(65239),n=r(48088),s=r(88170),i=r.n(s),a=r(30893),d={};for(let e in a)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>a[e]);r.d(t,d);let l={children:["",{children:["(protected)",{children:["dashboard",{children:["galary",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,63781)),"/mnt/c/users/elly/desktop/sadaka/frontend/app/(protected)/dashboard/galary/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,61331)),"/mnt/c/users/elly/desktop/sadaka/frontend/app/(protected)/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,96612)),"/mnt/c/users/elly/desktop/sadaka/frontend/app/(protected)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,58014)),"/mnt/c/users/elly/desktop/sadaka/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/mnt/c/users/elly/desktop/sadaka/frontend/app/(protected)/dashboard/galary/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new o.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/(protected)/dashboard/galary/page",pathname:"/dashboard/galary",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11639:(e,t,r)=>{Promise.resolve().then(r.bind(r,82859))},12412:e=>{"use strict";e.exports=require("assert")},17215:(e,t,r)=>{Promise.resolve().then(r.bind(r,63781))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63781:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});let o=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/mnt/c/users/elly/desktop/sadaka/frontend/app/(protected)/dashboard/galary/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/mnt/c/users/elly/desktop/sadaka/frontend/app/(protected)/dashboard/galary/page.tsx","default")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},82859:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var o=r(60687),n=r(43210),s=r(77567);let i="https://bahifinal.pythonanywhere.com/api/header-images/",a=()=>{if("undefined"==typeof document)return"";let e=document.cookie.split("; ").find(e=>e.startsWith("csrftoken="));return e?decodeURIComponent(e.split("=")[1]):""},d=()=>"undefined"==typeof localStorage?null:localStorage.getItem("access_token"),l=()=>{let[e,t]=(0,n.useState)([]),[r,l]=(0,n.useState)(!1),[c,u]=(0,n.useState)(!1),[p,x]=(0,n.useState)({title:"",description:"",image:null}),[h,m]=(0,n.useState)(null),[g,b]=(0,n.useState)("idle"),[f,y]=(0,n.useState)(""),[v,j]=(0,n.useState)(""),[w,k]=(0,n.useState)(!1),[S,C]=(0,n.useState)(null),T=a(),z=d(),E=(0,n.useRef)(null);(0,n.useEffect)(()=>{let e=()=>k(window.innerWidth<768);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let P=(0,n.useCallback)(async()=>{try{l(!0);let e=z?{Authorization:`Bearer ${z}`}:{},r=await fetch(i,{headers:e});if(!r.ok)throw Error("Failed to fetch events");let o=await r.json();t(o)}catch(e){b("error"),j(e.message)}finally{l(!1)}},[z]);(0,n.useEffect)(()=>{P()},[P]);let B=e=>{b("success"),y(e),setTimeout(()=>b("idle"),2e3)},q=e=>{b("error"),j(e),setTimeout(()=>b("idle"),2500)},A=async e=>{e.preventDefault(),b("loading");try{let e=new FormData;e.append("title",p.title),e.append("description",p.description),p.image&&e.append("image",p.image);let t={"X-CSRFToken":T};z&&(t.Authorization=`Bearer ${z}`);let r=i,o="POST";h&&(r=`${i}${h.id}/`,o="PUT");let n=await fetch(r,{method:o,headers:t,body:e});if(!n.ok){let e=await n.json();throw Error(e.detail||JSON.stringify(e))}u(!1),m(null),x({title:"",description:"",image:null}),P(),B(h?"Event updated successfully.":"Event added successfully.")}catch(e){q(e.message)}},O=async e=>{if((await s.A.fire({title:"Are you sure?",text:"This event will be deleted permanently!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed){b("loading");try{let t={"X-CSRFToken":T};if(z&&(t.Authorization=`Bearer ${z}`),!(await fetch(`${i}${e}/`,{method:"DELETE",headers:t})).ok)throw Error("Failed to delete event");P(),B("Event deleted successfully.")}catch(e){q(e.message)}}},I=e=>{e?(m(e),x({title:e.title||"",description:e.description||"",image:null})):(m(null),x({title:"",description:"",image:null})),u(!0)},R=()=>{u(!1),m(null),x({title:"",description:"",image:null})},M=e=>{let{name:t,value:r}=e.target;x(e=>({...e,[t]:r}))},_={container:{width:w?"95%":"80%",maxWidth:"1200px",margin:"2rem auto",padding:w?"1rem":"2rem",backgroundColor:"#fff",borderRadius:"12px",boxShadow:"0 6px 15px rgba(0,0,0,0.08)",fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexDirection:w?"column":"row",gap:w?"1rem":"0"},heading:{color:"#2d3748",fontSize:w?"1.5rem":"2rem",fontWeight:"600",margin:0},button:{padding:"10px 16px",borderRadius:"6px",border:"none",cursor:"pointer",fontSize:"0.9rem",fontWeight:"500",transition:"all 0.2s ease",display:"inline-flex",alignItems:"center",justifyContent:"center"},primaryButton:{backgroundColor:"#4f46e5",color:"white",boxShadow:"0 2px 4px rgba(79, 70, 229, 0.3)"},dangerButton:{backgroundColor:"#dc2626",color:"white",boxShadow:"0 2px 4px rgba(220, 38, 38, 0.3)"},successButton:{backgroundColor:"#10b981",color:"white",boxShadow:"0 2px 4px rgba(16, 185, 129, 0.3)"},tableContainer:{overflowX:"auto",overflowY:"auto",maxHeight:"60vh",border:"1px solid #e5e7eb",borderRadius:"8px",marginBottom:"2rem",position:"relative"},table:{width:"100%",borderCollapse:"separate",borderSpacing:0,minWidth:w?"600px":"auto"},th:{padding:w?"12px 8px":"16px 12px",textAlign:"left",backgroundColor:"#f9fafb",color:"#374151",fontWeight:"600",fontSize:"0.875rem",position:"sticky",top:0,zIndex:10,borderBottom:"2px solid #e5e7eb"},td:{padding:w?"12px 8px":"16px 12px",textAlign:"left",borderBottom:"1px solid #f3f4f6",fontSize:"0.875rem",color:"#4b5563"},tr:{transition:"background-color 0.2s"},actionCell:{display:"flex",gap:"8px"},modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:w?"1rem":"0"},modalContent:{backgroundColor:"white",padding:"2rem",borderRadius:"12px",width:w?"100%":"500px",maxWidth:"90vw",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 10px 25px rgba(0,0,0,0.2)"},modalHeader:{marginBottom:"1.5rem"},modalTitle:{fontSize:"1.5rem",fontWeight:"600",color:"#1f2937",margin:0},formGroup:{marginBottom:"1.5rem"},label:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#374151"},input:{width:"100%",padding:"0.75rem",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"1rem",boxSizing:"border-box"},textarea:{width:"100%",padding:"0.75rem",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"1rem",minHeight:"100px",resize:"vertical",boxSizing:"border-box"},fileInput:{width:"100%",padding:"0.5rem",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"1rem",boxSizing:"border-box"},modalActions:{display:"flex",gap:"12px",justifyContent:"flex-end"},loadingRow:{textAlign:"center",padding:"2rem",color:"#6b7280"},emptyRow:{textAlign:"center",padding:"2rem",color:"#6b7280",fontStyle:"italic"},eventImage:{width:"60px",height:"60px",objectFit:"cover",borderRadius:"6px",transition:"transform 0.3s ease",cursor:"pointer"},eventImageHovered:{transform:"scale(1.5)",zIndex:100,position:"relative",boxShadow:"0 4px 8px rgba(0,0,0,0.2)"}},N={transform:"translateY(-1px)",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"};return(0,o.jsxs)("div",{style:_.container,children:[(0,o.jsxs)("div",{style:_.header,children:[(0,o.jsx)("h2",{style:_.heading,children:"Events"}),(0,o.jsx)("button",{style:{..._.button,..._.successButton},onClick:()=>I(),onMouseOver:e=>Object.assign(e.currentTarget.style,N),onMouseOut:e=>{e.currentTarget.style.transform="",e.currentTarget.style.boxShadow=_.button.boxShadow},children:"+ Add Event"})]}),"success"===g?(0,o.jsxs)("div",{className:"text-center mb-4",children:[(0,o.jsx)("div",{className:"flex justify-center mb-2",children:(0,o.jsx)("div",{className:"flex items-center justify-center w-10 h-10 bg-green-100 rounded-full",children:(0,o.jsx)("svg",{className:"w-6 h-6 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})})}),(0,o.jsx)("p",{className:"text-green-700",children:f})]}):"error"===g?(0,o.jsxs)("div",{className:"text-center mb-4",children:[(0,o.jsx)("div",{className:"flex justify-center mb-2",children:(0,o.jsx)("div",{className:"flex items-center justify-center w-10 h-10 bg-red-100 rounded-full",children:(0,o.jsx)("svg",{className:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})}),(0,o.jsx)("p",{className:"text-red-700",children:v})]}):null,(0,o.jsx)("div",{style:_.tableContainer,children:(0,o.jsxs)("table",{style:_.table,children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{style:_.th,children:"ID"}),(0,o.jsx)("th",{style:_.th,children:"Image"}),(0,o.jsx)("th",{style:_.th,children:"Title"}),(0,o.jsx)("th",{style:_.th,children:"Description"}),(0,o.jsx)("th",{style:_.th,children:"Created At"}),(0,o.jsx)("th",{style:_.th,children:"Actions"})]})}),(0,o.jsx)("tbody",{children:r?(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:6,style:_.loadingRow,children:"Loading events..."})}):0===e.length?(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:6,style:_.emptyRow,children:"No events found"})}):e.map(e=>(0,o.jsxs)("tr",{style:_.tr,children:[(0,o.jsx)("td",{style:_.td,children:e.id}),(0,o.jsx)("td",{style:_.td,children:e.image&&(0,o.jsx)("img",{src:e.image,alt:e.title,style:{..._.eventImage,...S===e.id?_.eventImageHovered:{}},onMouseEnter:()=>C(e.id),onMouseLeave:()=>C(null)})}),(0,o.jsx)("td",{style:_.td,children:(0,o.jsx)("strong",{children:e.title})}),(0,o.jsx)("td",{style:_.td,children:e.description}),(0,o.jsx)("td",{style:_.td,children:e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"}),(0,o.jsx)("td",{style:_.td,children:(0,o.jsxs)("div",{style:_.actionCell,children:[(0,o.jsx)("button",{style:{..._.button,..._.primaryButton,padding:"6px 12px",fontSize:"0.8rem"},onClick:()=>I(e),onMouseOver:e=>Object.assign(e.currentTarget.style,N),onMouseOut:e=>{e.currentTarget.style.transform="",e.currentTarget.style.boxShadow=_.button.boxShadow},children:"Edit"}),(0,o.jsx)("button",{style:{..._.button,..._.dangerButton,padding:"6px 12px",fontSize:"0.8rem"},onClick:()=>O(e.id),onMouseOver:e=>Object.assign(e.currentTarget.style,N),onMouseOut:e=>{e.currentTarget.style.transform="",e.currentTarget.style.boxShadow=_.button.boxShadow},children:"Delete"})]})})]},e.id))})]})}),c&&(0,o.jsx)("div",{style:_.modalOverlay,onClick:R,children:(0,o.jsxs)("div",{style:_.modalContent,onClick:e=>e.stopPropagation(),ref:E,children:[(0,o.jsx)("div",{style:_.modalHeader,children:(0,o.jsx)("h3",{style:_.modalTitle,children:h?"Edit Event":"Add New Event"})}),(0,o.jsxs)("form",{onSubmit:A,children:[(0,o.jsxs)("div",{style:_.formGroup,children:[(0,o.jsx)("label",{style:_.label,children:"Title:"}),(0,o.jsx)("input",{type:"text",name:"title",value:p.title,onChange:M,style:_.input,required:!0})]}),(0,o.jsxs)("div",{style:_.formGroup,children:[(0,o.jsx)("label",{style:_.label,children:"Description:"}),(0,o.jsx)("textarea",{name:"description",value:p.description,onChange:M,style:_.textarea,required:!0})]}),(0,o.jsxs)("div",{style:_.formGroup,children:[(0,o.jsx)("label",{style:_.label,children:"Image:"}),(0,o.jsx)("input",{type:"file",name:"image",onChange:e=>{x(t=>({...t,image:e.target.files?.[0]||null}))},style:_.fileInput,required:!h})]}),(0,o.jsxs)("div",{style:_.modalActions,children:[(0,o.jsx)("button",{type:"button",style:{..._.button,..._.dangerButton},onClick:R,onMouseOver:e=>Object.assign(e.currentTarget.style,N),onMouseOut:e=>{e.currentTarget.style.transform="",e.currentTarget.style.boxShadow=_.button.boxShadow},children:"Cancel"}),(0,o.jsx)("button",{type:"submit",style:{..._.button,..._.successButton},disabled:"loading"===g,onMouseOver:e=>{"loading"!==g&&Object.assign(e.currentTarget.style,N)},onMouseOut:e=>{e.currentTarget.style.transform="",e.currentTarget.style.boxShadow=_.button.boxShadow},children:"loading"===g?h?"Updating...":"Creating...":h?"Update":"Create"})]})]})]})})]})}},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[447,985,658,814,770,803,158],()=>r(50));module.exports=o})();