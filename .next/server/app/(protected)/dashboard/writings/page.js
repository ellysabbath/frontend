(()=>{var e={};e.id=693,e.ids=[693],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},10948:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(60687),l=s(43210),o=s(77567);let a="https://bahifinal.pythonanywhere.com/",n=()=>{let[e,t]=(0,l.useState)([]),[s,n]=(0,l.useState)(!1),[i,d]=(0,l.useState)(!1),[c,u]=(0,l.useState)(null),[p,h]=(0,l.useState)(!1),[x,m]=(0,l.useState)({title:"",file:null}),[f,b]=(0,l.useState)(""),[g,w]=(0,l.useState)(!1),v=(0,l.useRef)(null),j=(0,l.useRef)(null),k=()=>{let e={"X-CSRFToken":document.cookie.split("; ").find(e=>e.startsWith("csrftoken="))?.split("=")[1]||""},t=localStorage.getItem("access_token");return t&&(e.Authorization=`Bearer ${t}`),e},y=(0,l.useCallback)(async()=>{n(!0),w(!0);try{let e=await fetch(`${a}books/`,{headers:k()});if(!e.ok)throw Error("Failed to fetch books");let s=await e.json();t(s)}catch(e){o.A.fire({icon:"error",title:"Error",text:e.message,position:"center",showConfirmButton:!1,timer:3e3})}finally{n(!1),w(!1)}},[]);(0,l.useEffect)(()=>{y()},[y]);let N=(e=null)=>{u(e),m(e?{title:e.title,file:null}:{title:"",file:null}),h(!0),w(!0)},C=()=>{h(!1),u(null),w(!1),j.current&&(j.current.value="")},B=async(e,t,s,r=!1)=>{let l={method:e,headers:k()};s&&!r?(l.headers={...l.headers,"Content-Type":"application/json"},l.body=JSON.stringify(s)):s&&r&&(l.body=s);let o=await fetch(`${a}${t}`,l);if(!o.ok)throw Error(await o.text()||"Request failed");return 204===o.status?null:await o.json()},P=async e=>{if(e.preventDefault(),x.title&&(c||x.file)){d(!0);try{let e=new FormData;e.append("title",x.title),x.file&&e.append("book_file",x.file),c?(await B("PUT",`books/${c.id}/`,e,!0),o.A.fire({icon:"success",title:"Book Updated Successfully!",position:"center",showConfirmButton:!1,timer:3e3})):(await B("POST","books/",e,!0),o.A.fire({icon:"success",title:"Book Uploaded Successfully!",position:"center",showConfirmButton:!1,timer:3e3})),C(),y()}catch(e){o.A.fire({icon:"error",title:"Error",text:e.message,position:"center",showConfirmButton:!1,timer:3e3})}finally{d(!1)}}},S=async e=>{if((await o.A.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",position:"center",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"})).isConfirmed){d(!0);try{await B("DELETE",`books/${e}/`),o.A.fire({icon:"success",title:"Book Deleted Successfully!",position:"center",showConfirmButton:!1,timer:3e3}),y()}catch(e){o.A.fire({icon:"error",title:"Error",text:e.message,position:"center",showConfirmButton:!1,timer:3e3})}finally{d(!1)}}},q=e=>{let t=document.createElement("a");t.href=e.book_file,t.download=e.title,document.body.appendChild(t),t.click(),document.body.removeChild(t)},z=e=>window.open(e.book_file,"_blank"),R=e.filter(e=>e.title.toLowerCase().includes(f.toLowerCase())),_=e=>new Date(e).toLocaleDateString();return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-6",children:[(0,r.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,r.jsxs)("header",{className:"mb-6 text-center",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-slate-800 mb-2",children:"Book Library"}),(0,r.jsx)("p",{className:"text-slate-600",children:"Manage your digital book collection"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden mb-6",children:[(0,r.jsxs)("div",{className:"p-4 border-b flex flex-col sm:flex-row justify-between items-center gap-4",children:[(0,r.jsx)("input",{type:"text",placeholder:"Search books...",value:f,onChange:e=>b(e.target.value),className:"border px-4 py-2 rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-slate-500"}),(0,r.jsxs)("button",{onClick:()=>N(),className:"bg-slate-800 text-white px-4 py-2 rounded-lg hover:bg-slate-900 transition-colors flex items-center gap-2 w-full sm:w-auto justify-center",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),"Add Book"]})]}),s||g?(0,r.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-slate-800"})}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-slate-800 text-white",children:[(0,r.jsx)("th",{className:"p-4 text-left font-semibold rounded-tl-lg",children:"Title"}),(0,r.jsx)("th",{className:"p-4 text-left font-semibold",children:"Date Added"}),(0,r.jsx)("th",{className:"p-4 text-center font-semibold rounded-tr-lg",children:"Actions"})]})}),(0,r.jsx)("tbody",{children:0===R.length?(0,r.jsx)("tr",{children:(0,r.jsxs)("td",{colSpan:3,className:"p-8 text-center text-gray-500",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 mx-auto text-slate-300 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),(0,r.jsx)("p",{children:"No books found"})]})}):R.map((e,t)=>(0,r.jsxs)("tr",{className:`hover:bg-slate-50 transition-colors ${t===R.length-1?"":"border-b"}`,children:[(0,r.jsx)("td",{className:"p-4 text-slate-800 font-medium",children:e.title}),(0,r.jsx)("td",{className:"p-4 text-slate-600",children:_(e.date_uploaded)}),(0,r.jsx)("td",{className:"p-4",children:(0,r.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,r.jsx)("button",{onClick:()=>q(e),className:"p-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-colors flex items-center gap-1",title:"Download",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})})}),(0,r.jsx)("button",{onClick:()=>z(e),className:"p-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-colors flex items-center gap-1",title:"Read",children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,r.jsx)("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),(0,r.jsx)("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]})}),(0,r.jsx)("button",{onClick:()=>N(e),className:"p-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-colors flex items-center gap-1",title:"Edit",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})}),(0,r.jsx)("button",{onClick:()=>S(e.id),className:"p-2 bg-slate-100 text-red-600 rounded-lg hover:bg-red-50 transition-colors flex items-center gap-1",disabled:i,title:"Delete",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})})]},e.id))})]})})]}),(0,r.jsxs)("div",{className:"text-center text-slate-700 bg-white p-3 rounded-lg shadow",children:["Total Books: ",(0,r.jsx)("span",{className:"font-bold",children:e.length})]})]}),p&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{ref:v,className:"bg-white p-6 rounded-xl shadow-lg w-full max-w-md",children:[(0,r.jsxs)("h3",{className:"text-xl font-semibold mb-4 text-slate-800 flex items-center gap-2",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),c?"Edit Book":"Upload New Book"]}),(0,r.jsxs)("form",{onSubmit:P,children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block font-medium mb-1 text-slate-700",children:"Title:"}),(0,r.jsx)("input",{type:"text",name:"title",value:x.title,onChange:e=>m(t=>({...t,[e.target.name]:e.target.value})),className:"w-full border px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-500",required:!0})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block font-medium mb-1 text-slate-700",children:c?"Replace File (optional):":"Book File:"}),(0,r.jsx)("input",{type:"file",ref:j,onChange:e=>{e.target.files&&e.target.files[0]&&m(t=>({...t,file:e.target.files[0]}))},className:"w-full border px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-500",accept:".pdf,.epub,.mobi,.txt",required:!c})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("button",{type:"submit",disabled:i,className:"flex-1 bg-slate-800 text-white py-2 rounded-lg hover:bg-slate-900 transition-colors flex items-center justify-center gap-2",children:i?(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Update"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),"Upload"]})}),(0,r.jsx)("button",{type:"button",onClick:C,disabled:i,className:"flex-1 bg-slate-100 text-slate-700 py-2 rounded-lg hover:bg-slate-200 transition-colors",children:"Cancel"})]})]})]})})]})}},11628:(e,t,s)=>{Promise.resolve().then(s.bind(s,10948))},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34286:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>a.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var r=s(65239),l=s(48088),o=s(88170),a=s.n(o),n=s(30893),i={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>n[e]);s.d(t,i);let d={children:["",{children:["(protected)",{children:["dashboard",{children:["writings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,94650)),"/mnt/c/users/elly/desktop/sadaka/frontend/app/(protected)/dashboard/writings/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,61331)),"/mnt/c/users/elly/desktop/sadaka/frontend/app/(protected)/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,96612)),"/mnt/c/users/elly/desktop/sadaka/frontend/app/(protected)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,58014)),"/mnt/c/users/elly/desktop/sadaka/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/mnt/c/users/elly/desktop/sadaka/frontend/app/(protected)/dashboard/writings/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:l.RouteKind.APP_PAGE,page:"/(protected)/dashboard/writings/page",pathname:"/dashboard/writings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},48076:(e,t,s)=>{Promise.resolve().then(s.bind(s,94650))},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},94650:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/mnt/c/users/elly/desktop/sadaka/frontend/app/(protected)/dashboard/writings/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/mnt/c/users/elly/desktop/sadaka/frontend/app/(protected)/dashboard/writings/page.tsx","default")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[447,985,658,814,770,803,158],()=>s(34286));module.exports=r})();