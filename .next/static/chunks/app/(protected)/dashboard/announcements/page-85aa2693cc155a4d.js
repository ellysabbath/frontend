(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[748],{5989:(e,t,n)=>{Promise.resolve().then(n.bind(n,9092))},9092:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var o=n(5155),r=n(2115),a=n(4752),i=n.n(a);let l=()=>{let e="https://bahifinal.pythonanywhere.com/announcements/",t="https://bahifinal.pythonanywhere.com/api/header-images/",n="https://bahifinal.pythonanywhere.com/comments/",[a,l]=(0,r.useState)({announcements:[],events:[],loading:!0,eventsLoading:!1,isSmallScreen:window.innerWidth<768,editingAnnouncement:null,showModal:!1,showEventModal:!1,formData:{title:"",content:""},eventFormData:{title:"",description:"",image:null}}),[s,d]=(0,r.useState)([]),[c,h]=(0,r.useState)(!0),[u,m]=(0,r.useState)(null),{announcements:x,events:y,loading:g,eventsLoading:p,isSmallScreen:f,editingAnnouncement:b,showModal:j,showEventModal:w,formData:v,eventFormData:S}=a,C=(()=>{if("undefined"==typeof document)return"";let e=document.cookie.split("; ").find(e=>e.startsWith("csrftoken="));return e?decodeURIComponent(e.split("=")[1]):""})(),T="undefined"==typeof localStorage?null:localStorage.getItem("access_token"),k=(0,r.useRef)(null),E=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=()=>{l(e=>({...e,isSmallScreen:window.innerWidth<768}))};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let O=(0,r.useCallback)(async()=>{try{l(e=>({...e,loading:!0}));let t=T?{Authorization:"Bearer ".concat(T)}:{},n=await fetch(e,{headers:t});if(!n.ok)throw Error("Failed to fetch announcements");let o=await n.json();l(e=>({...e,announcements:o,loading:!1}))}catch(e){i().fire("Error",e.message,"error"),l(e=>({...e,loading:!1}))}},[T]),B=(0,r.useCallback)(async()=>{try{l(e=>({...e,eventsLoading:!0}));let e=T?{Authorization:"Bearer ".concat(T)}:{},n=await fetch(t,{headers:e});if(!n.ok)throw Error("Failed to fetch events");let o=await n.json();l(e=>({...e,events:o,eventsLoading:!1}))}catch(e){l(e=>({...e,eventsLoading:!1}))}},[T]),D=async()=>{try{h(!0);let e=await fetch(n);if(!e.ok)throw Error("Failed to fetch comments");let t=await e.json();d(t)}catch(e){m(e.message)}finally{h(!1)}};(0,r.useEffect)(()=>{O(),B(),D()},[O,B]);let A=async e=>{if((await i().fire({title:"Are you sure?",text:"This comment will be deleted permanently!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed)try{let t={"X-CSRFToken":C};if(T&&(t.Authorization="Bearer ".concat(T)),!(await fetch("".concat(n).concat(e,"/"),{method:"DELETE",headers:t})).ok)throw Error("Failed to delete comment");d(t=>t.filter(t=>t.id!==e)),i().fire("Deleted!","Comment has been deleted.","success")}catch(e){i().fire("Error",e.message,"error")}},z=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;l(t=>({...t,editingAnnouncement:e,showModal:!0,formData:e?{title:e.title,content:e.content}:{title:"",content:""}}))},M=()=>l(e=>({...e,showModal:!1,editingAnnouncement:null})),R=()=>l(e=>({...e,showEventModal:!1})),I=async(e,t,n)=>{try{let o={"Content-Type":"application/json","X-CSRFToken":C};T&&(o.Authorization="Bearer ".concat(T));let r=await fetch(t,{method:e,headers:o,body:JSON.stringify(n)});if(!r.ok){let e=await r.json();throw Error(e.detail||JSON.stringify(e))}return r}catch(e){throw i().fire("Error",e.message,"error"),e}},F=async e=>{e.preventDefault();try{l(e=>({...e,eventsLoading:!0}));let e=new FormData;e.append("title",S.title),e.append("description",S.description),S.image&&e.append("image",S.image);let n={"X-CSRFToken":C};T&&(n.Authorization="Bearer ".concat(T));let o=await fetch(t,{method:"POST",headers:n,body:e});if(!o.ok){let e=await o.json();throw Error(e.detail||JSON.stringify(e))}i().fire({title:"Success!",text:"Event created successfully",icon:"success",toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}),R(),B()}catch(e){i().fire("Error",e.message,"error")}finally{l(e=>({...e,eventsLoading:!1}))}},L=async e=>{if((await i().fire({title:"Are you sure?",text:"This event will be deleted permanently!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed)try{let n={"X-CSRFToken":C};if(T&&(n.Authorization="Bearer ".concat(T)),!(await fetch("".concat(t).concat(e,"/"),{method:"DELETE",headers:n})).ok)throw Error("Failed to delete event");i().fire("Deleted!","Event has been deleted.","success"),B()}catch(e){i().fire("Error",e.message,"error")}},N=async t=>{t.preventDefault();try{let t={title:v.title,content:v.content},n=b?"".concat(e).concat(b.id,"/"):e,o=b?"PUT":"POST";await I(o,n,t),i().fire("Success","Announcement ".concat(b?"updated":"created"," successfully"),"success"),M(),O()}catch(e){}},W=async t=>{if((await i().fire({title:"Are you sure?",text:"This can't be undone!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed)try{await I("DELETE","".concat(e).concat(t,"/"),{}),i().fire("Deleted!","Announcement has been deleted.","success"),O()}catch(e){}},_={container:{width:f?"95%":"80%",maxWidth:"1200px",margin:"2rem auto",padding:f?"1rem":"2rem",backgroundColor:"#ffffff",borderRadius:"12px",boxShadow:"0 6px 15px rgba(0,0,0,0.08)",fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexDirection:f?"column":"row",gap:f?"1rem":"0"},heading:{color:"#2d3748",fontSize:f?"1.5rem":"2rem",fontWeight:"600",margin:0},button:{padding:"10px 16px",borderRadius:"6px",border:"none",cursor:"pointer",fontSize:"0.9rem",fontWeight:"500",transition:"all 0.2s ease",display:"inline-flex",alignItems:"center",justifyContent:"center"},primaryButton:{backgroundColor:"#4f46e5",color:"white",boxShadow:"0 2px 4px rgba(79, 70, 229, 0.3)"},dangerButton:{backgroundColor:"#dc2626",color:"white",boxShadow:"0 2px 4px rgba(220, 38, 38, 0.3)"},secondaryButton:{backgroundColor:"#6b7280",color:"white"},successButton:{backgroundColor:"#10b981",color:"white",boxShadow:"0 2px 4px rgba(16, 185, 129, 0.3)"},tableContainer:{overflowX:"auto",overflowY:"auto",maxHeight:"60vh",border:"1px solid #e5e7eb",borderRadius:"8px",marginBottom:"2rem",position:"relative"},table:{width:"100%",borderCollapse:"separate",borderSpacing:0,minWidth:f?"600px":"auto"},th:{padding:f?"12px 8px":"16px 12px",textAlign:"left",backgroundColor:"#f9fafb",color:"#374151",fontWeight:"600",fontSize:"0.875rem",position:"sticky",top:0,zIndex:10,borderBottom:"2px solid "},td:{padding:f?"12px 8px":"16px 12px",textAlign:"left",borderBottom:"1px solid #f3f4f6",fontSize:"0.875rem",color:"#4b5563"},tr:{transition:"background-color 0.2s"},actionCell:{display:"flex",gap:"8px"},commentsSection:{marginTop:"2rem",paddingTop:"1.5rem",borderTop:"1px solid #e5e7eb"},commentsTitle:{fontSize:"1.25rem",fontWeight:"600",color:"#374151",marginBottom:"1rem"},commentItem:{padding:"12px 16px",border:"1px solid #e5e7eb",borderRadius:"8px",marginBottom:"12px",backgroundColor:"#f9fafb",display:"flex",justifyContent:"space-between",alignItems:"center"},commentContent:{color:"#4b5563",fontStyle:"italic",margin:0,flex:1},modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:f?"1rem":"0"},modalContent:{backgroundColor:"white",padding:"2rem",borderRadius:"12px",width:f?"100":"500px",maxWidth:"90vw",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 10px 25px rgba(0,0,0,0.2)"},modalHeader:{marginBottom:"1.5rem"},modalTitle:{fontSize:"1.5rem",fontWeight:"600",color:"#1f2937",margin:0},formGroup:{marginBottom:"1.5rem"},label:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#374151"},input:{width:"100%",padding:"0.75rem",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"1rem",boxSizing:"border-box"},textarea:{width:"100%",padding:"0.75rem",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"1rem",minHeight:"120px",resize:"vertical",boxSizing:"border-box"},fileInput:{width:"100%",padding:"0.5rem",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"1rem",boxSizing:"border-box"},modalActions:{display:"flex",gap:"12px",justifyContent:"flex-end"},loadingRow:{textAlign:"center",padding:"2rem",color:"#6b7280"},emptyRow:{textAlign:"center",padding:"2rem",color:"#6b7280",fontStyle:"italic"},eventsHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",margin:"2rem 0 1rem 0",flexDirection:f?"column":"row",gap:f?"1rem":"0"},eventsTitle:{fontSize:f?"1.25rem":"1.5rem",fontWeight:"600",color:"#2d3748",margin:0},eventImage:{width:"60px",height:"60px",objectFit:"cover",borderRadius:"6px"}},X={transform:"translateY(-1px)",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"};return(0,r.useEffect)(()=>{let e=document.createElement("style");return e.textContent="\n    @keyframes slideInRight {\n      from {\n        transform: translateX(100%);\n        opacity: 0;\n      }\n      to {\n        transform: translateX(0);\n        opacity: 1;\n      }\n    }\n    @keyframes slideOutRight {\n      from {\n        transform: translateX(0);\n        opacity: 1;\n      }\n      to {\n        transform: translateX(100%);\n        opacity: 0;\n      }\n    }\n  ",document.head.appendChild(e),()=>{document.head.removeChild(e)}},[]),(0,o.jsxs)("div",{style:_.container,children:[(0,o.jsxs)("div",{style:_.header,children:[(0,o.jsx)("h2",{style:_.heading,children:"Announcements"}),(0,o.jsx)("button",{style:{..._.button,..._.primaryButton},onClick:()=>z(),onMouseOver:e=>Object.assign(e.currentTarget.style,X),onMouseOut:e=>{e.currentTarget.style.transform="",e.currentTarget.style.boxShadow=_.button.boxShadow},children:"+ New Announcement"})]}),(0,o.jsx)("div",{style:_.tableContainer,children:(0,o.jsxs)("table",{style:_.table,children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{style:_.th,children:"ID"}),(0,o.jsx)("th",{style:_.th,children:"Date"}),(0,o.jsx)("th",{style:_.th,children:"Title"}),(0,o.jsx)("th",{style:_.th,children:"Content"}),(0,o.jsx)("th",{style:_.th,children:"Actions"})]})}),(0,o.jsx)("tbody",{children:g?(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:5,style:_.loadingRow,children:"Loading announcements..."})}):0===x.length?(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:5,style:_.emptyRow,children:"No announcements found"})}):x.map(e=>(0,o.jsxs)("tr",{style:_.tr,children:[(0,o.jsx)("td",{style:_.td,children:e.id}),(0,o.jsx)("td",{style:_.td,children:new Date(e.date).toLocaleDateString()}),(0,o.jsx)("td",{style:_.td,children:(0,o.jsx)("strong",{children:e.title})}),(0,o.jsx)("td",{style:_.td,children:e.content}),(0,o.jsx)("td",{style:_.td,children:(0,o.jsxs)("div",{style:_.actionCell,children:[(0,o.jsx)("button",{style:{..._.button,..._.secondaryButton,padding:"6px 12px",fontSize:"0.8rem"},onClick:()=>z(e),onMouseOver:e=>Object.assign(e.currentTarget.style,X),onMouseOut:e=>{e.currentTarget.style.transform="",e.currentTarget.style.boxShadow=_.button.boxShadow},children:"Edit"}),(0,o.jsx)("button",{style:{..._.button,..._.dangerButton,padding:"6px 12px",fontSize:"0.8rem"},onClick:()=>W(e.id),onMouseOver:e=>Object.assign(e.currentTarget.style,X),onMouseOut:e=>{e.currentTarget.style.transform="",e.currentTarget.style.boxShadow=_.button.boxShadow},children:"Delete"})]})})]},e.id))})]})}),(0,o.jsxs)("div",{style:_.eventsHeader,children:[(0,o.jsx)("h3",{style:_.eventsTitle,children:"Events"}),(0,o.jsx)("button",{style:{..._.button,..._.successButton},onClick:()=>{l(e=>({...e,showEventModal:!0,eventFormData:{title:"",description:"",image:null}}))},onMouseOver:e=>Object.assign(e.currentTarget.style,X),onMouseOut:e=>{e.currentTarget.style.transform="",e.currentTarget.style.boxShadow=_.button.boxShadow},children:"+ Create Event"})]}),(0,o.jsx)("div",{style:_.tableContainer,children:(0,o.jsxs)("table",{style:_.table,children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{style:_.th,children:"ID"}),(0,o.jsx)("th",{style:_.th,children:"Image"}),(0,o.jsx)("th",{style:_.th,children:"Title"}),(0,o.jsx)("th",{style:_.th,children:"Description"}),(0,o.jsx)("th",{style:_.th,children:"Created At"}),(0,o.jsx)("th",{style:_.th,children:"Updated At"}),(0,o.jsx)("th",{style:_.th,children:"Actions"})]})}),(0,o.jsx)("tbody",{children:p?(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:7,style:_.loadingRow,children:"Loading events..."})}):0===y.length?(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:7,style:_.emptyRow,children:"No events found"})}):y.map(e=>(0,o.jsxs)("tr",{style:_.tr,children:[(0,o.jsx)("td",{style:_.td,children:e.id}),(0,o.jsx)("td",{style:_.td,children:e.image&&(0,o.jsx)("img",{src:e.image,alt:e.title,style:_.eventImage})}),(0,o.jsx)("td",{style:_.td,children:(0,o.jsx)("strong",{children:e.title})}),(0,o.jsx)("td",{style:_.td,children:e.description}),(0,o.jsx)("td",{style:_.td,children:e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"}),(0,o.jsx)("td",{style:_.td,children:e.updated_at?new Date(e.updated_at).toLocaleDateString():"N/A"}),(0,o.jsx)("td",{style:_.td,children:(0,o.jsx)("div",{style:_.actionCell,children:(0,o.jsx)("button",{style:{..._.button,..._.dangerButton,padding:"6px 12px",fontSize:"0.8rem"},onClick:()=>L(e.id),onMouseOver:e=>Object.assign(e.currentTarget.style,X),onMouseOut:e=>{e.currentTarget.style.transform="",e.currentTarget.style.boxShadow=_.button.boxShadow},children:"Delete"})})})]},e.id))})]})}),(0,o.jsxs)("div",{style:_.commentsSection,children:[(0,o.jsx)("h3",{style:_.commentsTitle,children:"Comments"}),c?(0,o.jsx)("p",{style:{color:"#6b7280",fontStyle:"italic"},children:"Loading comments..."}):u?(0,o.jsxs)("p",{style:{color:"#dc2626",fontStyle:"italic"},children:["Error: ",u]}):0===s.length?(0,o.jsx)("p",{style:{color:"#6b7280",fontStyle:"italic"},children:"No comments yet."}):s.map(e=>(0,o.jsxs)("div",{style:_.commentItem,children:[(0,o.jsx)("p",{style:_.commentContent,children:e.content}),(0,o.jsx)("button",{onClick:()=>A(e.id),style:{..._.button,..._.dangerButton,padding:"4px 8px",fontSize:"0.75rem"},onMouseOver:e=>Object.assign(e.currentTarget.style,X),onMouseOut:e=>{e.currentTarget.style.transform="",e.currentTarget.style.boxShadow=_.button.boxShadow},children:"Delete"})]},e.id))]}),j&&(0,o.jsx)("div",{style:_.modalOverlay,onClick:M,children:(0,o.jsxs)("div",{style:_.modalContent,onClick:e=>e.stopPropagation(),ref:k,children:[(0,o.jsx)("div",{style:_.modalHeader,children:(0,o.jsx)("h3",{style:_.modalTitle,children:b?"Edit Announcement":"Create New Announcement"})}),(0,o.jsxs)("form",{onSubmit:N,children:[(0,o.jsxs)("div",{style:_.formGroup,children:[(0,o.jsx)("label",{style:_.label,children:"Title:"}),(0,o.jsx)("input",{type:"text",name:"title",value:v.title,onChange:e=>l(t=>({...t,formData:{...t.formData,title:e.target.value}})),required:!0,style:_.input})]}),(0,o.jsxs)("div",{style:_.formGroup,children:[(0,o.jsx)("label",{style:_.label,children:"Content:"}),(0,o.jsx)("textarea",{name:"content",value:v.content,onChange:e=>l(t=>({...t,formData:{...t.formData,content:e.target.value}})),required:!0,style:_.textarea})]}),(0,o.jsxs)("div",{style:_.modalActions,children:[(0,o.jsx)("button",{type:"button",style:{..._.button,..._.secondaryButton},onClick:M,onMouseOver:e=>Object.assign(e.currentTarget.style,X),onMouseOut:e=>{e.currentTarget.style.transform="",e.currentTarget.style.boxShadow=_.button.boxShadow},children:"Cancel"}),(0,o.jsx)("button",{type:"submit",style:{..._.button,..._.primaryButton},onMouseOver:e=>Object.assign(e.currentTarget.style,X),onMouseOut:e=>{e.currentTarget.style.transform="",e.currentTarget.style.boxShadow=_.button.boxShadow},children:b?"Update":"Create"})]})]})]})}),w&&(0,o.jsx)("div",{style:_.modalOverlay,onClick:R,children:(0,o.jsxs)("div",{style:_.modalContent,onClick:e=>e.stopPropagation(),ref:E,children:[(0,o.jsx)("div",{style:_.modalHeader,children:(0,o.jsx)("h3",{style:_.modalTitle,children:"Create New Event"})}),(0,o.jsxs)("form",{onSubmit:F,children:[(0,o.jsxs)("div",{style:_.formGroup,children:[(0,o.jsx)("label",{style:_.label,children:"Title:"}),(0,o.jsx)("input",{type:"text",name:"title",value:S.title,onChange:e=>l(t=>({...t,eventFormData:{...t.eventFormData,title:e.target.value}})),required:!0,style:_.input})]}),(0,o.jsxs)("div",{style:_.formGroup,children:[(0,o.jsx)("label",{style:_.label,children:"Description:"}),(0,o.jsx)("textarea",{name:"description",value:S.description,onChange:e=>l(t=>({...t,eventFormData:{...t.eventFormData,description:e.target.value}})),required:!0,style:_.textarea})]}),(0,o.jsxs)("div",{style:_.formGroup,children:[(0,o.jsx)("label",{style:_.label,children:"Image:"}),(0,o.jsx)("input",{type:"file",name:"image",onChange:e=>l(t=>{var n;return{...t,eventFormData:{...t.eventFormData,image:(null==(n=e.target.files)?void 0:n[0])||null}}}),style:_.fileInput})]}),(0,o.jsxs)("div",{style:_.modalActions,children:[(0,o.jsx)("button",{type:"button",style:{..._.button,..._.secondaryButton},onClick:R,onMouseOver:e=>Object.assign(e.currentTarget.style,X),onMouseOut:e=>{e.currentTarget.style.transform="",e.currentTarget.style.boxShadow=_.button.boxShadow},children:"Cancel"}),(0,o.jsx)("button",{type:"submit",style:{..._.button,..._.successButton},disabled:p,onMouseOver:e=>{p||Object.assign(e.currentTarget.style,X)},onMouseOut:e=>{e.currentTarget.style.transform="",e.currentTarget.style.boxShadow=_.button.boxShadow},children:p?"Creating...":"Create Event"})]})]})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[320,441,684,358],()=>t(5989)),_N_E=e.O()}]);