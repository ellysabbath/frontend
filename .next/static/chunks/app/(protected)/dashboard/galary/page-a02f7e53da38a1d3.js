(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[414],{4011:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n=r(5155),o=r(2115),i=r(4752),l=r.n(i);let s="https://bahifinal.pythonanywhere.com/api/header-images/",a=()=>{if("undefined"==typeof document)return"";let e=document.cookie.split("; ").find(e=>e.startsWith("csrftoken="));return e?decodeURIComponent(e.split("=")[1]):""},d=()=>"undefined"==typeof localStorage?null:localStorage.getItem("access_token"),c=()=>{let[e,t]=(0,o.useState)([]),[r,i]=(0,o.useState)(!1),[c,u]=(0,o.useState)(!1),[x,h]=(0,o.useState)({title:"",description:"",image:null}),[p,g]=(0,o.useState)(null),[m,b]=(0,o.useState)("idle"),[f,y]=(0,o.useState)(""),[j,w]=(0,o.useState)(""),[v,S]=(0,o.useState)(window.innerWidth<768),[C,k]=(0,o.useState)(null),T=a(),B=d(),E=(0,o.useRef)(null);(0,o.useEffect)(()=>{let e=()=>S(window.innerWidth<768);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let z=(0,o.useCallback)(async()=>{try{i(!0);let e=B?{Authorization:"Bearer ".concat(B)}:{},r=await fetch(s,{headers:e});if(!r.ok)throw Error("Failed to fetch events");let n=await r.json();t(n)}catch(e){b("error"),w(e.message)}finally{i(!1)}},[B]);(0,o.useEffect)(()=>{z()},[z]);let O=e=>{b("success"),y(e),setTimeout(()=>b("idle"),2e3)},I=e=>{b("error"),w(e),setTimeout(()=>b("idle"),2500)},N=async e=>{e.preventDefault(),b("loading");try{let e=new FormData;e.append("title",x.title),e.append("description",x.description),x.image&&e.append("image",x.image);let t={"X-CSRFToken":T};B&&(t.Authorization="Bearer ".concat(B));let r=s,n="POST";p&&(r="".concat(s).concat(p.id,"/"),n="PUT");let o=await fetch(r,{method:n,headers:t,body:e});if(!o.ok){let e=await o.json();throw Error(e.detail||JSON.stringify(e))}u(!1),g(null),h({title:"",description:"",image:null}),z(),O(p?"Event updated successfully.":"Event added successfully.")}catch(e){I(e.message)}},R=async e=>{if((await l().fire({title:"Are you sure?",text:"This event will be deleted permanently!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed){b("loading");try{let t={"X-CSRFToken":T};if(B&&(t.Authorization="Bearer ".concat(B)),!(await fetch("".concat(s).concat(e,"/"),{method:"DELETE",headers:t})).ok)throw Error("Failed to delete event");z(),O("Event deleted successfully.")}catch(e){I(e.message)}}},A=e=>{e?(g(e),h({title:e.title||"",description:e.description||"",image:null})):(g(null),h({title:"",description:"",image:null})),u(!0)},M=()=>{u(!1),g(null),h({title:"",description:"",image:null})},W=e=>{let{name:t,value:r}=e.target;h(e=>({...e,[t]:r}))},L={container:{width:v?"95%":"80%",maxWidth:"1200px",margin:"2rem auto",padding:v?"1rem":"2rem",backgroundColor:"#fff",borderRadius:"12px",boxShadow:"0 6px 15px rgba(0,0,0,0.08)",fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexDirection:v?"column":"row",gap:v?"1rem":"0"},heading:{color:"#2d3748",fontSize:v?"1.5rem":"2rem",fontWeight:"600",margin:0},button:{padding:"10px 16px",borderRadius:"6px",border:"none",cursor:"pointer",fontSize:"0.9rem",fontWeight:"500",transition:"all 0.2s ease",display:"inline-flex",alignItems:"center",justifyContent:"center"},primaryButton:{backgroundColor:"#4f46e5",color:"white",boxShadow:"0 2px 4px rgba(79, 70, 229, 0.3)"},dangerButton:{backgroundColor:"#dc2626",color:"white",boxShadow:"0 2px 4px rgba(220, 38, 38, 0.3)"},successButton:{backgroundColor:"#10b981",color:"white",boxShadow:"0 2px 4px rgba(16, 185, 129, 0.3)"},tableContainer:{overflowX:"auto",overflowY:"auto",maxHeight:"60vh",border:"1px solid #e5e7eb",borderRadius:"8px",marginBottom:"2rem",position:"relative"},table:{width:"100%",borderCollapse:"separate",borderSpacing:0,minWidth:v?"600px":"auto"},th:{padding:v?"12px 8px":"16px 12px",textAlign:"left",backgroundColor:"#f9fafb",color:"#374151",fontWeight:"600",fontSize:"0.875rem",position:"sticky",top:0,zIndex:10,borderBottom:"2px solid #e5e7eb"},td:{padding:v?"12px 8px":"16px 12px",textAlign:"left",borderBottom:"1px solid #f3f4f6",fontSize:"0.875rem",color:"#4b5563"},tr:{transition:"background-color 0.2s"},actionCell:{display:"flex",gap:"8px"},modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:v?"1rem":"0"},modalContent:{backgroundColor:"white",padding:"2rem",borderRadius:"12px",width:v?"100%":"500px",maxWidth:"90vw",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 10px 25px rgba(0,0,0,0.2)"},modalHeader:{marginBottom:"1.5rem"},modalTitle:{fontSize:"1.5rem",fontWeight:"600",color:"#1f2937",margin:0},formGroup:{marginBottom:"1.5rem"},label:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#374151"},input:{width:"100%",padding:"0.75rem",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"1rem",boxSizing:"border-box"},textarea:{width:"100%",padding:"0.75rem",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"1rem",minHeight:"100px",resize:"vertical",boxSizing:"border-box"},fileInput:{width:"100%",padding:"0.5rem",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"1rem",boxSizing:"border-box"},modalActions:{display:"flex",gap:"12px",justifyContent:"flex-end"},loadingRow:{textAlign:"center",padding:"2rem",color:"#6b7280"},emptyRow:{textAlign:"center",padding:"2rem",color:"#6b7280",fontStyle:"italic"},eventImage:{width:"60px",height:"60px",objectFit:"cover",borderRadius:"6px",transition:"transform 0.3s ease",cursor:"pointer"},eventImageHovered:{transform:"scale(1.5)",zIndex:100,position:"relative",boxShadow:"0 4px 8px rgba(0,0,0,0.2)"}},D={transform:"translateY(-1px)",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"};return(0,n.jsxs)("div",{style:L.container,children:[(0,n.jsxs)("div",{style:L.header,children:[(0,n.jsx)("h2",{style:L.heading,children:"Events"}),(0,n.jsx)("button",{style:{...L.button,...L.successButton},onClick:()=>A(),onMouseOver:e=>Object.assign(e.currentTarget.style,D),onMouseOut:e=>{e.currentTarget.style.transform="",e.currentTarget.style.boxShadow=L.button.boxShadow},children:"+ Add Event"})]}),"success"===m?(0,n.jsxs)("div",{className:"text-center mb-4",children:[(0,n.jsx)("div",{className:"flex justify-center mb-2",children:(0,n.jsx)("div",{className:"flex items-center justify-center w-10 h-10 bg-green-100 rounded-full",children:(0,n.jsx)("svg",{className:"w-6 h-6 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})})}),(0,n.jsx)("p",{className:"text-green-700",children:f})]}):"error"===m?(0,n.jsxs)("div",{className:"text-center mb-4",children:[(0,n.jsx)("div",{className:"flex justify-center mb-2",children:(0,n.jsx)("div",{className:"flex items-center justify-center w-10 h-10 bg-red-100 rounded-full",children:(0,n.jsx)("svg",{className:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})}),(0,n.jsx)("p",{className:"text-red-700",children:j})]}):null,(0,n.jsx)("div",{style:L.tableContainer,children:(0,n.jsxs)("table",{style:L.table,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{style:L.th,children:"ID"}),(0,n.jsx)("th",{style:L.th,children:"Image"}),(0,n.jsx)("th",{style:L.th,children:"Title"}),(0,n.jsx)("th",{style:L.th,children:"Description"}),(0,n.jsx)("th",{style:L.th,children:"Created At"}),(0,n.jsx)("th",{style:L.th,children:"Actions"})]})}),(0,n.jsx)("tbody",{children:r?(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:6,style:L.loadingRow,children:"Loading events..."})}):0===e.length?(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:6,style:L.emptyRow,children:"No events found"})}):e.map(e=>(0,n.jsxs)("tr",{style:L.tr,children:[(0,n.jsx)("td",{style:L.td,children:e.id}),(0,n.jsx)("td",{style:L.td,children:e.image&&(0,n.jsx)("img",{src:e.image,alt:e.title,style:{...L.eventImage,...C===e.id?L.eventImageHovered:{}},onMouseEnter:()=>k(e.id),onMouseLeave:()=>k(null)})}),(0,n.jsx)("td",{style:L.td,children:(0,n.jsx)("strong",{children:e.title})}),(0,n.jsx)("td",{style:L.td,children:e.description}),(0,n.jsx)("td",{style:L.td,children:e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"}),(0,n.jsx)("td",{style:L.td,children:(0,n.jsxs)("div",{style:L.actionCell,children:[(0,n.jsx)("button",{style:{...L.button,...L.primaryButton,padding:"6px 12px",fontSize:"0.8rem"},onClick:()=>A(e),onMouseOver:e=>Object.assign(e.currentTarget.style,D),onMouseOut:e=>{e.currentTarget.style.transform="",e.currentTarget.style.boxShadow=L.button.boxShadow},children:"Edit"}),(0,n.jsx)("button",{style:{...L.button,...L.dangerButton,padding:"6px 12px",fontSize:"0.8rem"},onClick:()=>R(e.id),onMouseOver:e=>Object.assign(e.currentTarget.style,D),onMouseOut:e=>{e.currentTarget.style.transform="",e.currentTarget.style.boxShadow=L.button.boxShadow},children:"Delete"})]})})]},e.id))})]})}),c&&(0,n.jsx)("div",{style:L.modalOverlay,onClick:M,children:(0,n.jsxs)("div",{style:L.modalContent,onClick:e=>e.stopPropagation(),ref:E,children:[(0,n.jsx)("div",{style:L.modalHeader,children:(0,n.jsx)("h3",{style:L.modalTitle,children:p?"Edit Event":"Add New Event"})}),(0,n.jsxs)("form",{onSubmit:N,children:[(0,n.jsxs)("div",{style:L.formGroup,children:[(0,n.jsx)("label",{style:L.label,children:"Title:"}),(0,n.jsx)("input",{type:"text",name:"title",value:x.title,onChange:W,style:L.input,required:!0})]}),(0,n.jsxs)("div",{style:L.formGroup,children:[(0,n.jsx)("label",{style:L.label,children:"Description:"}),(0,n.jsx)("textarea",{name:"description",value:x.description,onChange:W,style:L.textarea,required:!0})]}),(0,n.jsxs)("div",{style:L.formGroup,children:[(0,n.jsx)("label",{style:L.label,children:"Image:"}),(0,n.jsx)("input",{type:"file",name:"image",onChange:e=>{h(t=>{var r;return{...t,image:(null==(r=e.target.files)?void 0:r[0])||null}})},style:L.fileInput,required:!p})]}),(0,n.jsxs)("div",{style:L.modalActions,children:[(0,n.jsx)("button",{type:"button",style:{...L.button,...L.dangerButton},onClick:M,onMouseOver:e=>Object.assign(e.currentTarget.style,D),onMouseOut:e=>{e.currentTarget.style.transform="",e.currentTarget.style.boxShadow=L.button.boxShadow},children:"Cancel"}),(0,n.jsx)("button",{type:"submit",style:{...L.button,...L.successButton},disabled:"loading"===m,onMouseOver:e=>{"loading"!==m&&Object.assign(e.currentTarget.style,D)},onMouseOut:e=>{e.currentTarget.style.transform="",e.currentTarget.style.boxShadow=L.button.boxShadow},children:"loading"===m?p?"Updating...":"Creating...":p?"Update":"Create"})]})]})]})})]})}},7313:(e,t,r)=>{Promise.resolve().then(r.bind(r,4011))}},e=>{var t=t=>e(e.s=t);e.O(0,[320,441,684,358],()=>t(7313)),_N_E=e.O()}]);