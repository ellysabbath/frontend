(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[596],{667:(e,t,r)=>{Promise.resolve().then(r.bind(r,4753))},4753:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var n=r(5155),o=r(2115),i=r(4752),s=r.n(i);let l="https://bahifinal.pythonanywhere.com/messages/";function a(){let[e,t]=(0,o.useState)([]),[r,i]=(0,o.useState)(!1),[a,d]=(0,o.useState)(""),[c,m]=(0,o.useState)(window.innerWidth<600);(0,o.useEffect)(()=>{h();let e=()=>m(window.innerWidth<600);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let h=async()=>{i(!0);try{let e=await fetch(l);if(!e.ok)throw Error("Failed to fetch messages");let r=await e.json();t(r)}catch(e){s().fire("Error",e.message,"error")}finally{i(!1)}},u=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{isConfirmed:n,value:o}=await s().fire({title:"POST"===e?"Create SMS Message":"Edit SMS Message",html:'\n        <div style="text-align: left;">\n          <div style="margin-bottom: 1rem;">\n            <label for="content" style="display: block; margin-bottom: 0.5rem; font-weight: 500; color: #374151;">SMS Content</label>\n            <textarea \n              id="content" \n              class="swal2-textarea" \n              style="\n                width: 100%;\n                min-height: 120px;\n                padding: 0.75rem;\n                border: 1px solid #D1D5DB;\n                border-radius: 0.375rem;\n                background-color: #F9FAFB;\n                font-family: inherit;\n                transition: border-color 0.2s;\n              "\n              required\n            >'.concat(r.content||"","</textarea>\n          </div>\n        </div>\n      "),showCancelButton:!0,focusConfirm:!1,confirmButtonText:"POST"===e?"Create":"Update",confirmButtonColor:"#4F46E5",cancelButtonColor:"#6B7280",preConfirm:()=>({content:document.getElementById("content").value})});if(n)try{if(i(!0),!(await fetch(t,{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).ok)throw Error("Failed to send an SMS");s().fire("Success","SMS sent successfully!","success"),h()}catch(e){s().fire("Error",e.message,"error")}finally{i(!1)}},g=async e=>{if((await s().fire({title:"Confirm Delete",text:"This SMS will be permanently deleted",icon:"warning",showCancelButton:!0,confirmButtonColor:"#DC2626",cancelButtonColor:"#6B7280",confirmButtonText:"Delete"})).isConfirmed)try{if(i(!0),!(await fetch("".concat(l).concat(e,"/"),{method:"DELETE"})).ok)throw Error("Failed to delete message");s().fire("Deleted!","SMS deleted successfully.","success"),h()}catch(e){s().fire("Error",e.message,"error")}finally{i(!1)}},f=e.filter(e=>e.content.toLowerCase().includes(a.toLowerCase())),x={padding:"0.75rem 1rem",backgroundColor:"#F9FAFB",borderBottom:"1px solid #E5E7EB",textAlign:"left",fontWeight:600,color:"#374151"},p={padding:"0.75rem 1rem",borderBottom:"1px solid #E5E7EB",textAlign:"left",color:"#4B5563"},y={background:"none",border:"none",color:"white",cursor:"pointer",marginRight:"0.5rem",padding:"0.375rem 0.75rem",borderRadius:"0.375rem",fontSize:"0.8125rem",fontWeight:500,transition:"all 0.2s ease"};return(0,n.jsxs)("div",{style:{width:c?"95%":"800px",margin:"2rem auto",padding:c?"1rem":"1.5rem",backgroundColor:"white",borderRadius:"0.5rem",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",paddingBottom:"1rem",borderBottom:"1px solid #E5E7EB"},children:[(0,n.jsx)("h2",{style:{color:"#111827",fontSize:"1.25rem",fontWeight:600,margin:0},children:"SMS Messages"}),(0,n.jsxs)("button",{onClick:()=>u("POST",l),style:{padding:"0.5rem 1rem",backgroundColor:"#4F46E5",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontWeight:500,fontSize:"0.875rem",transition:"background-color 0.2s ease",display:"flex",alignItems:"center",gap:"0.5rem"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="#4338CA",onMouseLeave:e=>e.currentTarget.style.backgroundColor="#4F46E5",children:[(0,n.jsx)("svg",{style:{width:"1rem",height:"1rem"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Create New"]})]}),(0,n.jsx)("div",{style:{marginBottom:"1rem"},children:(0,n.jsx)("input",{type:"text",placeholder:"Search messages...",value:a,onChange:e=>d(e.target.value),style:{width:"100%",padding:"0.5rem 0.75rem",border:"1px solid #D1D5DB",borderRadius:"0.375rem",fontSize:"1rem",marginBottom:"0.5rem"}})}),(0,n.jsx)("div",{style:{overflowX:"auto",borderRadius:"0.5rem"},children:(0,n.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:c?"0.875rem":"0.9375rem",border:"1px solid #E5E7EB",borderRadius:"0.5rem",overflow:"hidden"},children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{style:x,children:"Content"}),(0,n.jsx)("th",{style:x,children:"Date"}),(0,n.jsx)("th",{style:{...x,width:"160px"},children:"Actions"})]})}),(0,n.jsx)("tbody",{children:r?(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:3,style:{...p,textAlign:"center",padding:"1.5rem"},children:(0,n.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",backgroundColor:"#F9FAFB",borderRadius:"0.375rem",color:"#6B7280"},children:[(0,n.jsx)("svg",{style:{width:"1rem",height:"1rem",animation:"spin 1s linear infinite"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Loading messages..."]})})}):0===f.length?(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:3,style:{...p,textAlign:"center",padding:"1.5rem",color:"#6B7280"},children:"No messages found"})}):f.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{style:p,children:(0,n.jsx)("div",{style:{maxWidth:c?"200px":"400px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.content})}),(0,n.jsx)("td",{style:p,children:new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),(0,n.jsxs)("td",{style:p,children:[(0,n.jsx)("button",{onClick:()=>u("PUT","".concat(l).concat(e.id,"/"),e),style:{...y,backgroundColor:"#3B82F6"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="#2563EB",onMouseLeave:e=>e.currentTarget.style.backgroundColor="#3B82F6",children:"Edit"}),(0,n.jsx)("button",{onClick:()=>g(e.id),style:{...y,backgroundColor:"#EF4444"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="#DC2626",onMouseLeave:e=>e.currentTarget.style.backgroundColor="#EF4444",children:"Delete"})]})]},e.id))})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[320,441,684,358],()=>t(667)),_N_E=e.O()}]);