(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[311],{2264:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var a=s(5155),l=s(2115);let r=()=>{let[e,t]=(0,l.useState)([]),[s,r]=(0,l.useState)(!0),[n,c]=(0,l.useState)(""),[i,d]=(0,l.useState)("all"),[o,x]=(0,l.useState)(0),[m,u]=(0,l.useState)(!1),h=()=>{var e;let t={"Content-Type":"application/json","X-CSRFToken":(null==(e=document.cookie.split("; ").find(e=>e.startsWith("csrftoken=")))?void 0:e.split("=")[1])||""},s=localStorage.getItem("access_token");return s&&(t.Authorization="Bearer ".concat(s)),t},p=(0,l.useCallback)(async()=>{r(!0);try{let e=await fetch("".concat("https://bahifinal.pythonanywhere.com/","contacts/"),{headers:h()});if(!e.ok)throw Error("Failed to fetch contacts");let s=await e.json();t(s)}catch(e){console.error("Fetch error:",e)}finally{r(!1)}},[]);(0,l.useEffect)(()=>{p()},[p]),(0,l.useEffect)(()=>{let e=()=>u(window.innerWidth<768);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let f=e.filter(e=>{let t=e.name.toLowerCase().includes(n.toLowerCase())||e.email.toLowerCase().includes(n.toLowerCase()),s="all"===i||e.role===i;return t&&s});return(0,l.useEffect)(()=>{let e=0,t=f.length,s=setInterval(()=>{x(e+=1),e>=t&&clearInterval(s)},Math.max(Math.floor(1e3/t),20));return()=>clearInterval(s)},[f]),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Members"}),(0,a.jsx)("p",{className:"text-gray-600",children:"available users"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow mb-6",children:[(0,a.jsx)("div",{className:"p-4 border-b",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-4 sm:space-y-0 sm:space-x-4",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("input",{type:"text",placeholder:"Search users...",value:n,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})}),(0,a.jsxs)("select",{value:i,onChange:e=>d(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"all",children:"All Roles"}),(0,a.jsx)("option",{value:"Admin",children:"Admin"}),(0,a.jsx)("option",{value:"staff",children:"Staff"}),(0,a.jsx)("option",{value:"user",children:"User"})]})]})}),(0,a.jsx)("div",{className:"p-4 border-b",children:(0,a.jsxs)("h2",{className:"text-lg font-semibold text-gray-700",children:["Total Users:"," ",(0,a.jsx)("span",{className:"text-blue-600 animate-pulse text-xl",children:o})]})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-50",children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"User"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Role"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Phone"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:s?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:"Loading users..."})}):0===f.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:"No users found"})}):f.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3",children:(0,a.jsx)("span",{className:"text-blue-600 font-medium",children:e.name[0]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-800",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.email})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:e.role})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_active?"active":"inactive"})}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.phone_number||"-"})]},e.id))})]})})]})]})}},8285:(e,t,s)=>{Promise.resolve().then(s.bind(s,2264))}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(8285)),_N_E=e.O()}]);